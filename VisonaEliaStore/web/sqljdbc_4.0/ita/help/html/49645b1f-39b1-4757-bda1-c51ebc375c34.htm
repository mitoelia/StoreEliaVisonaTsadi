<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Connessione a un database in SQL Azure</title><meta name="Language" content="it-it" /><meta name="System.Keywords" content="SQL Azure" /><meta name="Microsoft.Help.Id" content="49645b1f-39b1-4757-bda1-c51ebc375c34" /><meta name="Description" content="In questo argomento si illustrano i problemi in caso di utilizzo di Microsoft JDBC Driver per SQL Server per la connessione a un database di SQL Azure. Per ulteriori informazioni sui database di SQL Azure, vedere:" /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Connessione a un database in SQL Azure</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>In questo argomento si illustrano i problemi in caso di utilizzo di Microsoft JDBC Driver per SQL Server per la connessione a un database di SQL Azure. Per ulteriori informazioni sui database di SQL Azure, vedere:</p><ul><li><p><a href="http://go.microsoft.com/fwlink/?LinkID=202490">Database di SQL Azure</a></p></li><li><p><a href="http://msdn.microsoft.com/library/gg715284.aspx">Procedura: connettersi a SQL Azure mediante JDBC</a></p></li><li><p><a href="http://msdn.microsoft.com/library/windowsazure/hh749029(VS.103).aspx">Utilizzo di SQL Azure in Java</a></p></li></ul></div><h1 class="heading">Informazioni dettagliate</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><dl class="authored"><dt>In SQL Azure è necessario connettersi al database master per chiamare <span sdata="langKeyword" value="SQLServerDatabaseMetaData.getCatalogs"><span class="keyword">SQLServerDatabaseMetaData.getCatalogs</span></span>.</dt><dd><p>SQL Azure non supporta la restituzione dell'intero set di cataloghi da un database utente. <span sdata="langKeyword" value="SQLServerDatabaseMetaData.getCatalogs"><span class="keyword">SQLServerDatabaseMetaData.getCatalogs</span></span> utilizza la vista sys.databases per ottenere i cataloghi. Fare riferimento alla trattazione delle autorizzazioni in <a href="http://go.microsoft.com/fwlink/?LinkId=217396">sys.databases (Database di SQL Azure)</a> per informazioni sul comportamento di <span sdata="langKeyword" value="SQLServerDatabaseMetaData.getCatalogs"><span class="keyword">SQLServerDatabaseMetaData.getCatalogs</span></span> in SQL Azure.</p></dd><dt>Connessioni eliminate</dt><dd><p>Durante la connessione a SQL Azure, è possibile che le connessioni inattive siano terminate da un componente di rete, ad esempio un firewall, dopo un periodo di inattività. Per evitare l'eliminazione di connessioni inattive da un componente di rete, è consigliabile impostare le seguenti impostazioni del Registro di sistema, o le relative equivalenti non Windows, nel sistema operativo in cui viene caricato il driver:</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Impostazione del Registro di sistema</p></th><th><p>Valore consigliato</p></th></tr><tr><td><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveTime</p></td><td><p>30000</p></td></tr><tr><td><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveInterval</p></td><td><p>1000</p></td></tr><tr><td><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\TcpMaxDataRetransmission</p></td><td><p>10</p></td></tr></table></div><p>È necessario riavviare il computer affinché le impostazioni del Registro di sistema abbiano effetto.</p><p>A tale scopo, durante l'esecuzione di Windows Azure creare un'attività di avvio per aggiungere le chiavi del Registro di sistema.  Ad esempio, aggiungere l'attività di avvio al file di definizione del servizio:</p><div class="sampleCode"><span codeLanguage="other"><pre>&lt;Startup&gt;
    &lt;Task commandLine="AddKeepAlive.cmd" executionContext="elevated" taskType="simple"&gt;
    &lt;/Task&gt;
&lt;/Startup&gt;</pre></span></div><p>Successivamente, aggiungere il file AddKeepAlive.cmd al progetto in uso. Impostare l'impostazione "Copia nella directory di output" su Copia sempre. Di seguito è riportato un esempio di file AddKeepAlive.cmd:</p><div class="sampleCode"><span codeLanguage="other"><pre>if exist keepalive.txt goto done
time /t &gt; keepalive.txt
REM Workaround for JDBC keep alive on SQL Azure
REG ADD HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters /v KeepAliveTime /t REG_DWORD /d 30000 &gt;&gt; keepalive.txt
REG ADD HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters /v KeepAliveInterval /t REG_DWORD /d 1000 &gt;&gt; keepalive.txt
REG ADD HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters /v TcpMaxDataRetransmission /t REG_DWORD /d 10 &gt;&gt; keepalive.txt
shutdown /r /t 1
:done</pre></span></div></dd><dt>Accodamento del nome del server all'ID utente nella stringa di connessione</dt><dd><p>Prima della versione 4.0 di Microsoft JDBC Driver per SQL Server, durante la connessione a un database di SQL Azure, veniva richiesto l'accodamento del nome del server all'ID utente nella stringa di connessione. Ad esempio, utente@nomeserver. A partire dalla versione 4.0 di Microsoft JDBC Driver per SQL Server, l'accodamento di @nomeserver all'ID utente nella stringa di connessione non è più necessario.</p></dd><dt>Impostazione di hostNameInCertificate obbligatoria per l'utilizzo della crittografia</dt><dd><p>Durante la connessione a SQL Azure, è consigliabile indicare <span sdata="langKeyword" value="hostNameInCertificate"><span class="keyword">hostNameInCertificate</span></span> se si specifica <span sdata="langKeyword" value="encrypt=true"><span class="keyword">encrypt=true</span></span>. Se il nome del server nella stringa di connessione è <span class="parameter" sdata="paramReference">shortName</span>.<span class="parameter" sdata="paramReference">domainName</span>, impostare la proprietà <span sdata="langKeyword" value="hostNameInCertificate"><span class="keyword">hostNameInCertificate</span></span> su *.<span class="parameter" sdata="paramReference">domainName</span>.</p><p>Ad esempio:</p><div class="sampleCode"><span codeLanguage="other"><pre>jdbc:sqlserver://abcd.int.mscds.com;databaseName= myDatabase;user=myName;password=myPassword;encrypt=true;hostNameInCertificate= *.int.mscds.com;</pre></span></div></dd></dl></div><span id="seeAlsoSpan"><h1 class="heading">Vedere anche</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="94bcfbe3-f00e-4774-bda8-bb7577518fec.htm">Connessione a SQL Server con il driver JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Inviare <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dThank%20you%20for%20your%20feedback.%20The%20developer%20writing%20teams%20use%20your%20feedback%20to%20improve%20documentation.%20While%20we%20are%20reviewing%20your%20feedback,%20we%20may%20send%20you%20e-mail%20to%20ask%20for%20clarification%20or%20feedback%20on%20a%20solution.%20We%20do%20not%20use%20your%20e-mail%20address%20for%20any%20other%20purpose%20and%20we%20delete%20it%20after%20we%20finish%20our%20review.%0\AFor%20further%20information%20about%20the%20privacy%20policies%20of%20Microsoft,%20please%20see%20http://privacy.microsoft.com/it-it/default.aspx.%0\A%0\d','Customer%20Feedback');">commenti e suggerimenti</a> su questo argomento a Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tutti i diritti sono riservati.</a></p></span></div></div></body></html>