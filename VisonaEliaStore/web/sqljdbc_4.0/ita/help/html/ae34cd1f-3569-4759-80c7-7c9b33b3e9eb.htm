<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Configurazione del client per la crittografia SSL</title><meta name="Language" content="it-it" /><meta name="System.Keywords" content="certificato" /><meta name="System.Keywords" content="configurazione del certificato SSL" /><meta name="System.Keywords" content="SSL" /><meta name="System.Keywords" content="certificato SSL" /><meta name="Microsoft.Help.Id" content="ae34cd1f-3569-4759-80c7-7c9b33b3e9eb" /><meta name="Description" content="Microsoft JDBC Driver per SQL Server o il client è responsabile della convalida del server e dell'attendibilità per il client stesso dell'Autorità di certificazione che ha emesso il certificato." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Configurazione del client per la crittografia SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Microsoft JDBC Driver per SQL Server o il client è responsabile della convalida del server e dell'attendibilità per il client stesso dell'Autorità di certificazione che ha emesso il certificato. Ai fini della convalida del certificato del server, è necessario che venga fornito il materiale relativo all'attendibilità in fase di connessione. L'autorità emittente del certificato del server deve inoltre essere un'Autorità di certificazione considerata attendibile dal client.</p><p>In questo argomento viene innanzitutto descritto come fornire il materiale relativo all'attendibilità nel computer client. Viene quindi descritto come importare un certificato del server nell'archivio di attendibilità del computer client quando l'istanza del certificato SSL (Secure Sockets Layer) di SQL Server viene emessa da un'Autorità di certificazione privata.</p><p>Per ulteriori informazioni sulla convalida del certificato del server, vedere la sezione Convalida del certificato SSL del server in <span sdata="link"><a href="073f3b9e-8edd-4815-88ea-de0655d0325e.htm">Informazioni sul supporto SSL</a></span>.</p></div><h1 class="heading">Configurazione dell'archivio di attendibilità del client</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Per la convalida del certificato del server è necessario che in fase di connessione venga fornito il materiale relativo all'attendibilità utilizzando in modo esplicito le proprietà di connessione <span class="label">trustStore</span> e <span class="label">trustStorePassword</span> oppure utilizzando in modo implicito l'archivio di attendibilità predefinito JVM (Java Virtual Machine) sottostante. Per ulteriori informazioni sull'impostazione delle proprietà <span class="label">trustStore</span> e <span class="label">trustStorePassword</span> in una stringa di connessione, vedere <span sdata="link"><a href="ec91fa8a-ab7e-4c1e-a05a-d7951ddf33b1.htm">Connessione tramite la crittografia SSL</a></span>.</p><p>Se la proprietà <span class="label">trustStore</span> non è specificata o è impostata su Null, Microsoft JDBC Driver per SQL Server utilizzerà il provider di sicurezza di JVM sottostante, ovvero SunJSSE (Java Secure Socket Extension). Il provider SunJSSE fornisce uno strumento <b>TrustManager</b> predefinito che consente di convalidare i certificati X.509 restituiti da SQL Server in base al materiale relativo all'attendibilità fornito in un archivio di attendibilità.</p><p>Tramite <b>TrustManager</b> viene eseguito un tentativo di individuare il file trustStore predefinito in base all'ordine di ricerca seguente:</p><ul><li><p>Se la proprietà di sistema "javax.net.ssl.trustStore" è definita, tramite <b>TrustManager</b> viene eseguito un tentativo di individuare il file trustStore predefinito utilizzando il nome file specificato da tale proprietà di sistema.</p></li><li><p>Se la proprietà di sistema "javax.net.ssl.trustStore" non è stata specificata e il file "&lt;java-home&gt;/lib/security/jssecacerts" è presente, viene utilizzato tale file. </p></li><li><p>Se il file "&lt;java-home&gt;/lib/security/cacerts" è presente, viene utilizzato tale file.</p></li></ul><p>Per ulteriori informazioni, vedere la documentazione relativa all'interfaccia TrustManager SUNX509 nel sito Web Sun Microsystems.</p><p>Java Runtime Environment consente di impostare le proprietà di sistema trustStore e trustStorePassword come indicato di seguito: </p><div class="sampleCode"><span codeLanguage="other"><pre>java -Djavax.net.ssl.trustStore=C:\MyCertificates\storeName
java -Djavax.net.ssl.trustStorePassword=storePassword</pre></span></div><p>In questo caso, in qualsiasi applicazione in esecuzione in questo ambiente JVM queste impostazioni vengono utilizzate come predefinite. Per sostituire le impostazioni predefinite nell'applicazione, è necessario impostare le proprietà di connessione <span class="label">trustStore</span> e <span class="label">trustStorePassword</span> nella stringa di connessione o nel metodo Set appropriato della classe <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>.</p><p>È inoltre possibile configurare e gestire i file dell'archivio di attendibilità predefiniti, ad esempio "&lt;java-home&gt;/lib/security/jssecacerts" e "&lt;java-home&gt;/lib/security/cacerts". A tale scopo, utilizzare l'utilità "keytool" JAVA installata con JRE (Java Runtime Environment). Per ulteriori informazioni su tale utilità, vedere la relativa documentazione nel sito Web Sun Microsystems.</p><h1 class="heading">Importazione del certificato del server nell'archivio di attendibilità</h1><div class="subsection"><p>Durante l'handshake SSL, il server invia il proprio certificato chiave pubblica al client. L'autorità emittente di un certificato chiave pubblica è nota come Autorità di certificazione (CA). Il client deve verificare che l'Autorità di certificazione sia considerata attendibile dal client stesso. Questa operazione può essere eseguita se la chiave pubblica delle Autorità di certificazione attendibili è conosciuta in anticipo. In genere, con JVM viene fornito un set predefinito di Autorità di certificazione attendibili. </p><p>Se l'istanza del certificato SSL di SQL Server viene emessa da un'Autorità di certificazione privata, è necessario aggiungere il certificato dell'Autorità di certificazione all'elenco di certificati attendibili nell'archivio di attendibilità del computer client.</p><p>A tale scopo, utilizzare l'utilità "keytool" JAVA installata con JRE (Java Runtime Environment). Nel prompt dei comandi seguente viene illustrato come utilizzare l'utilità "keytool" per importare un certificato da un file:</p><div class="sampleCode"><span codeLanguage="other"><pre>keytool -import -v -trustcacerts -alias myServer -file caCert.cer -keystore truststore.ks</pre></span></div><p>Nell'esempio viene utilizzato un file denominato "caCert.cer" come file di certificato. È necessario ottenere questo file di certificato dal server. Nei passaggi seguenti viene illustrato come esportare il certificato del server in un file:</p><ol><li><p>Fare clic sul pulsante Start, scegliere Esegui e digitare MMC. MMC è l'acronimo di Microsoft Management Console.</p></li><li><p>In MMC aprire Certificati. </p></li><li><p>Espandere Personale, quindi Certificati. </p></li><li><p>Fare clic con il pulsante destro del mouse sul certificato del server, quindi scegliere Tutte le attività\Esporta. </p></li><li><p>Scegliere Avanti per passare alla pagina successiva a quella introduttiva dell'Esportazione guidata certificati. </p></li><li><p>Verificare che l'opzione "Non esportare la chiave privata" sia selezionata, quindi scegliere Avanti. </p></li><li><p>Verificare che sia selezionata l'opzione X.509 binario codificato DER (.CER) o Codificato Base 64 X.509 (.CER), quindi scegliere Avanti. </p></li><li><p>Immettere un nome per il file di esportazione.</p></li><li><p>Scegliere Avanti, quindi Fine per esportare il certificato.</p></li></ol></div></div><span id="seeAlsoSpan"><h1 class="heading">Vedere anche</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Utilizzo della crittografia SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Protezione delle applicazioni del driver JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Inviare <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dThank%20you%20for%20your%20feedback.%20The%20developer%20writing%20teams%20use%20your%20feedback%20to%20improve%20documentation.%20While%20we%20are%20reviewing%20your%20feedback,%20we%20may%20send%20you%20e-mail%20to%20ask%20for%20clarification%20or%20feedback%20on%20a%20solution.%20We%20do%20not%20use%20your%20e-mail%20address%20for%20any%20other%20purpose%20and%20we%20delete%20it%20after%20we%20finish%20our%20review.%0\AFor%20further%20information%20about%20the%20privacy%20policies%20of%20Microsoft,%20please%20see%20http://privacy.microsoft.com/it-it/default.aspx.%0\A%0\d','Customer%20Feedback');">commenti e suggerimenti</a> su questo argomento a Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tutti i diritti sono riservati.</a></p></span></div></div></body></html>