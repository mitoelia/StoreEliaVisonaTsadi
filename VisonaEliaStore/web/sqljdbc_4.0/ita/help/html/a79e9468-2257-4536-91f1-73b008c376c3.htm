<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Accesso a informazioni di diagnostica nel log degli eventi estesi</title><meta name="Language" content="it-it" /><meta name="Microsoft.Help.Id" content="a79e9468-2257-4536-91f1-73b008c376c3" /><meta name="Description" content="In Microsoft JDBC Driver 4." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Accesso a informazioni di diagnostica nel log degli eventi estesi</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>In Microsoft JDBC Driver 4.0 per SQL Server con l'aggiornamento della traccia (<span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Creazione di tracce</a></span>) è stato possibile semplificare sempre più la correlazione di eventi client con informazioni di diagnostica, ad esempio errori di connessione, provenienti dal buffer circolare della connettività del server e informazioni sulle prestazioni dell'applicazione nel log degli eventi estesi. Per ulteriori informazioni sulla lettura del log degli eventi estesi, vedere <a href="http://msdn.microsoft.com/en-us/library/hh710068(SQL.110).aspx ">Visualizzare i dati di una sessione di eventi</a>.</p></div><h1 class="heading">Informazioni dettagliate</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Per operazioni di connessione, tramite Microsoft JDBC Driver per SQL Server verrà inviato un ID connessione client. In caso di errore di connessione, è possibile accedere al buffer circolare della connettività (pagina sulla <a href="http://go.microsoft.com/fwlink/?LinkId=207752">risoluzione dei problemi relativi alla connettività in SQL Server 2008 con il buffer circolare della connettività</a>), individuare il campo <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> e ottenere le informazioni di diagnostica sul problema di connessione. Gli ID connessione client sono registrati nel buffer circolare solo in caso di errore. Se si verifica un errore di connessione prima dell'invio del pacchetto di preaccesso, un ID connessione client non verrà generato. L'ID connessione client è un GUID di 16 byte. È possibile trovare inoltre l'ID connessione client nell'output di destinazione degli eventi estesi, se l'azione <span sdata="langKeyword" value="client_connection_id"><span class="keyword">client_connection_id</span></span> viene aggiunta agli eventi in una sessione di eventi estesi. È possibile abilitare la traccia, rieseguire il comando di connessione e osservare il campo <span sdata="langKeyword" value="ClientConnectionID"><span class="keyword">ClientConnectionID</span></span> nella traccia, se si necessita di un ulteriore supporto diagnostico del driver client.</p><p>L'ID connessione client può essere ottenuto a livello di codice utilizzando <span sdata="link"><a href="031c01e2-2c65-4fe4-9700-fdbcc7a39f30.htm">Interfaccia ISQLServerConnection</a></span>. L'ID connessione sarà inoltre disponibile in tutte le eccezioni correlate alla connessione.</p><p>Quando si verifica un errore di connessione, con l'ID connessione client nelle informazioni relative alla traccia BID del server e nel buffer circolare è possibile semplificare la correlazione delle connessioni client alle connessioni nel server. Per ulteriori informazioni sulle tracce BID nel server, vedere la pagina relativa alla <a href="http://go.microsoft.com/fwlink/?LinkId=125805">traccia di accesso ai dati</a>. Si noti che nell'articolo sulla traccia di accesso ai dati sono inoltre contenute informazioni sull'esecuzione di una traccia di accesso ai dati, che non si applica a Microsoft JDBC Driver per SQL Server. Vedere <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Creazione di tracce</a></span> per informazioni sull'esecuzione di una traccia di accesso ai dati utilizzando Microsoft JDBC Driver per SQL Server.</p><p>Il driver JDBC invia anche un ID attività specifico del thread. L'ID attività viene acquisito nelle sessioni di eventi estesi se le sessioni vengono avviate con l'opzione TRACK_CAUSAILITY abilitata. Per problemi di prestazioni con una connessione attiva, è possibile ottenere l'ID attività dalla traccia del client (campo ActivityID) e quindi individuare l'ID attività nell'output degli eventi estesi. L'ID attività negli eventi estesi è un GUID a 16 byte, non lo stesso del GUID per l'ID connessione client, aggiunto con un numero di sequenza a quattro byte. Il numero di sequenza rappresenta l'ordine di una richiesta all'interno di un thread. ActivityId viene inviato per le istruzioni batch SQL e per le richieste RPC. Per abilitare l'invio di ActivityId al server, è innanzitutto necessario specificare la seguente coppia chiave-valore nel file Logging.Properties:</p><div class="sampleCode"><span codeLanguage="other"><pre>com.microsoft.sqlserver.jdbc.traceactivity = on</pre></span></div><p>Per ulteriori informazioni, vedere <span sdata="link"><a href="723aeae7-6504-4585-ba8b-3525115bea8b.htm">Creazione di tracce</a></span>. Questo flag di traccia viene utilizzato con i logger degli oggetti JDBC corrispondenti per stabilire se tracciare e inviare ActivityId nel driver JDBC. Oltre ad aggiornare il file Logging.Properties, è necessario abilitare il logger com.microsoft.sqlserver.jdbc al livello FINER o superiore. Se si desidera inviare ActivityId al server per le richieste effettuate da una classe specifica, è necessario abilitare il logger della classe corrispondente al livello FINER o FINEST. Se ad esempio la classe è SQLServerStatement, abilitare il logger com.microsoft.sqlserver.jdbc.SQLServerStatement.</p><p>Di seguito è riportato un esempio in cui viene utilizzato Transact-SQL per avviare una sessione di eventi estesi che verrà archiviata in un buffer circolare e che registrerà l'ID attività inviato da un client nelle operazioni batch e RPC:</p><div class="sampleCode"><span codeLanguage="other"><pre>create event session MySession on server
add event connectivity_ring_buffer_recorded,
add event sql_statement_starting (action (client_connection_id)),
add event sql_statement_completed (action (client_connection_id)),
add event rpc_starting (action (client_connection_id)),
add event rpc_completed (action (client_connection_id))
add target ring_buffer with (track_causality=on)</pre></span></div></div><span id="seeAlsoSpan"><h1 class="heading">Vedere anche</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="723e2680-a0c5-4a7d-a319-1e49e41078cf.htm">Diagnosi dei problemi relativi al driver JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Inviare <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dThank%20you%20for%20your%20feedback.%20The%20developer%20writing%20teams%20use%20your%20feedback%20to%20improve%20documentation.%20While%20we%20are%20reviewing%20your%20feedback,%20we%20may%20send%20you%20e-mail%20to%20ask%20for%20clarification%20or%20feedback%20on%20a%20solution.%20We%20do%20not%20use%20your%20e-mail%20address%20for%20any%20other%20purpose%20and%20we%20delete%20it%20after%20we%20finish%20our%20review.%0\AFor%20further%20information%20about%20the%20privacy%20policies%20of%20Microsoft,%20please%20see%20http://privacy.microsoft.com/it-it/default.aspx.%0\A%0\d','Customer%20Feedback');">commenti e suggerimenti</a> su questo argomento a Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tutti i diritti sono riservati.</a></p></span></div></div></body></html>