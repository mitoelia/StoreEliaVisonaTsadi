<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Creazione di tracce</title><meta name="Language" content="it-it" /><meta name="System.Keywords" content="tracce" /><meta name="Microsoft.Help.Id" content="723aeae7-6504-4585-ba8b-3525115bea8b" /><meta name="Description" content="Microsoft JDBC Driver per SQL Server supporta l'utilizzo della traccia (o registrazione) per semplificare la risoluzione dei problemi relativi all'utilizzo del driver JDBC nell'applicazione." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Creazione di tracce</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Microsoft JDBC Driver per SQL Server supporta l'utilizzo della traccia (o registrazione) per semplificare la risoluzione dei problemi relativi all'utilizzo del driver JDBC nell'applicazione. Per abilitare l'utilizzo delle tracce, nel driver JDBC vengono utilizzate le API di registrazione in java.util.logging, da cui è disponibile un set di classi per la creazione degli oggetti <b>Logger</b> e <b>LogRecord</b>.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Per il componente nativo (sqljdbc_xa.dll) incluso nel driver JDBC, la creazione di tracce è abilitata grazie al framework Built-In Diagnostics (BID). Per informazioni sul BID, vedere la pagina relativa alla <a href="http://go.microsoft.com/fwlink/?LinkId=70042">traccia di accesso ai dati in SQL Server 2005</a>.</p></div><p>Quando si sviluppa l'applicazione, è possibile eseguire chiamate a oggetti <b>Logger</b> che consentono di creare oggetti <b>LogRecord</b> i quali vengono quindi passati a oggetti <b>Handler</b> per l'elaborazione. Sia per gli oggetti <b>Logger</b> che per gli oggetti <b>Handler</b> vengono utilizzati i livelli di registrazione e, facoltativamente, i filtri di registrazione per definire quali <b>LogRecords</b> elaborare. Al termine delle operazioni di registrazione, con gli oggetti <b>Handler</b> possono facoltativamente essere utilizzati gli oggetti <b>Formatter</b> per pubblicare le informazioni sul log.</p><p>Per impostazione predefinita, l'output del framework java.util.logging viene scritto su un file. Tale file deve disporre di autorizzazioni di scrittura per il contesto su cui è in esecuzione il driver JDBC.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Per ulteriori informazioni sull'utilizzo dei vari oggetti di registrazione per la creazione di tracce dei programmi, vedere la documentazione Java Logging APIs (informazioni in lingua inglese) sul sito Web di Sun Microsystems.</p></div><p>Nelle sezioni seguenti sono descritti i livelli di registrazione e le categorie che è possibile registrare. Vengono inoltre fornite informazioni sull'abilitazione della creazione di tracce nell'applicazione.</p></div><h1 class="heading">Livelli di registrazione</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>A ciascun messaggio di log creato è associato un livello di registrazione. Tale livello determina l'importanza del messaggio. Il livello è definito dalla classe <span class="label">Level</span> in java.util.logging. Se abilitata per un livello, la registrazione verrà abilitata per tutti i livelli superiori. In questa sezione vengono descritti i livelli di registrazione per le categorie di registrazione pubbliche e interne. Per ulteriori informazioni sulle categorie di registrazione, vedere la sezione Categorie di registrazione in questo argomento.</p><p>Nella tabella seguente sono descritti i vari livelli di registrazione disponibili per le categorie di registrazione pubbliche.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Nome</p></th><th><p>Descrizione</p></th></tr><tr><td><p>SEVERE</p></td><td><p>Indica un problema grave. Si tratta del livello più elevato. Nel driver JDBC viene utilizzato per segnalare errori ed eccezioni.</p></td></tr><tr><td><p>WARNING</p></td><td><p>Indica un potenziale problema.</p></td></tr><tr><td><p>INFO</p></td><td><p>Fornisce messaggi informativi.</p></td></tr><tr><td><p>CONFIG</p></td><td><p>Fornisce messaggi sulla configurazione. Si noti che il driver JDBC non fornisce attualmente alcun messaggio sulla configurazione.</p></td></tr><tr><td><p>FINE</p></td><td><p>Fornisce informazioni di base sulle tracce, incluse tutte le eccezioni generate dai metodi pubblici.</p></td></tr><tr><td><p>FINER</p></td><td><p>Fornisce informazioni dettagliate sulle tracce, inclusi tutti i punti di ingresso e di uscita dei metodi pubblici con i tipi di dati dei parametri associati, nonché le proprietà pubbliche per le classi pubbliche. Fornisce inoltre parametri di input, parametri di output e valori restituiti del metodo ad eccezione dei tipi di valori restituiti CLOB, BLOB, NCLOB, Reader, &lt;stream&gt;. </p></td></tr><tr><td><p>FINEST</p></td><td><p>Fornisce le informazioni più dettagliate disponibili sulle tracce. È il livello più basso.</p></td></tr><tr><td><p>OFF</p></td><td><p>Disabilita la registrazione.</p></td></tr><tr><td><p>ALL</p></td><td><p>Abilita la registrazione di tutti i messaggi.</p></td></tr></table></div><p>Nella tabella seguente sono descritti i vari livelli di registrazione disponibili per le categorie di registrazione interne.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Nome</p></th><th><p>Descrizione</p></th></tr><tr><td><p>SEVERE</p></td><td><p>Indica un problema grave. Si tratta del livello più elevato. Nel driver JDBC viene utilizzato per segnalare errori ed eccezioni. </p></td></tr><tr><td><p>WARNING</p></td><td><p>Indica un potenziale problema.</p></td></tr><tr><td><p>INFO</p></td><td><p>Fornisce messaggi informativi.</p></td></tr><tr><td><p>FINE</p></td><td><p>Fornisce informazioni di base sulle tracce, incluse la creazione e l'eliminazione di oggetti di base. Fornisce inoltre tutte le eccezioni generate dai metodi pubblici.</p></td></tr><tr><td><p>FINER</p></td><td><p>Fornisce informazioni dettagliate sulle tracce, inclusi tutti i punti di ingresso e di uscita dei metodi pubblici con i tipi di dati dei parametri associati, nonché le proprietà pubbliche per le classi pubbliche. Fornisce inoltre parametri di input, parametri di output e valori restituiti del metodo ad eccezione dei tipi di valori restituiti CLOB, BLOB, NCLOB, Reader, &lt;stream&gt;.</p><p>Le seguenti categorie di registrazione erano incluse nella versione 1.2 del driver JDBC con il livello di registrazione FINE: <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>, <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a>, XA e <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>. A partire dalla versione 2.0 sono state aggiornate al livello FINER.</p></td></tr><tr><td><p>FINEST</p></td><td><p>Fornisce le informazioni più dettagliate disponibili sulle tracce. È il livello più basso.</p><p>Le seguenti categorie di registrazione erano incluse nella versione 1.2 del driver JDBC con il livello di registrazione FINEST: TDS.DATA e TDS.TOKEN. A partire dalla versione 2.0 hanno mantenuto lo stesso livello di registrazione. </p></td></tr><tr><td><p>OFF</p></td><td><p>Disabilita la registrazione.</p></td></tr><tr><td><p>ALL</p></td><td><p>Abilita la registrazione di tutti i messaggi.</p></td></tr></table></div></div><h1 class="heading">Categorie di registrazione</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>Quando si crea un oggetto <b>Logger</b>, è necessario indicare la categoria o l'entità denominata da cui si desidera ricevere le informazioni sul log. Il driver JDBC supporta le seguenti categorie di registrazione pubbliche, definite tutte nel pacchetto di driver com.microsoft.sqlserver.jdbc.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Nome</p></th><th><p>Descrizione</p></th></tr><tr><td><p>Connection</p></td><td><p>Consente di registrare i messaggi nella classe <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>. Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr><tr><td><p>Statement</p></td><td><p>Consente di registrare i messaggi nella classe <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a>. Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr><tr><td><p>DataSource</p></td><td><p>Consente di registrare i messaggi nella classe <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>ResultSet</p></td><td><p>Consente di registrare i messaggi nella classe <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a>. Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr><tr><td><p>Driver</p></td><td><p>Consente di registrare i messaggi nella classe <a href="fbdceae5-7e7b-4edb-8c33-c701ca6b2d53.htm">SQLServerDriver</a>. Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr></table></div><p>A partire dalla versione 2.0, il driver Microsoft JDBC fornisce anche il pacchetto com.microsoft.sqlserver.jdbc.internals, che include il supporto per la registrazione per le seguenti categorie di registrazione interne.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Nome</p></th><th><p>Descrizione</p></th></tr><tr><td><p>AuthenticationJNI</p></td><td><p>Registra i messaggi relativi ai problemi di autenticazione integrata di Windows, quando la proprietà di connessione <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> è impostata in modo implicito o esplicito su <span sdata="langKeyword" value="NativeAuthentication"><span class="keyword">NativeAuthentication</span></span>.</p><p>Le applicazioni possono impostare il livello di registrazione su FINEST e FINE.</p></td></tr><tr><td><p>SQLServerConnection</p></td><td><p>Consente di registrare i messaggi nella classe <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>. Le applicazioni possono impostare il livello di registrazione su FINE e FINER.</p></td></tr><tr><td><p>SQLServerDataSource</p></td><td><p>Consente di registrare i messaggi nelle classi <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>, <a href="b00e5a90-2af7-4d04-8ef8-256183777dcf.htm">SQLServerConnectionPoolDataSource</a> e <a href="4c87e9d3-904a-4b86-90cc-3684034c86ee.htm">SQLServerPooledConnection</a>.</p><p>Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr><tr><td><p>InputStream</p></td><td><p>Consente di registrare i messaggi relativi ai tipi di dati java.io.InputStream e java.io.Reader, nonché ai tipi di dati per i quali è disponibile un identificatore max, ad esempio varchar, nvarchar e varbinary.</p><p>Le applicazioni possono impostare il livello di registrazione su FINER.</p></td></tr><tr><td><p>SQLServerException</p></td><td><p>Consente di registrare i messaggi nella classe <a href="af5ef257-7cf6-4db3-b1ee-07d22d82bef1.htm">SQLServerException</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerResultSet</p></td><td><p>Consente di registrare i messaggi nella classe <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a>. Le applicazioni possono impostare il livello di registrazione su FINE, FINER e FINEST.</p></td></tr><tr><td><p>SQLServerStatement</p></td><td><p>Consente di registrare i messaggi nella classe <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a>. Le applicazioni possono impostare il livello di registrazione su FINE, FINER e FINEST.</p></td></tr><tr><td><p>XA</p></td><td><p>Consente di registrare i messaggi per tutte le transazioni XA nella classe <a href="95fc7b07-2498-4a7e-8f7f-ee0d86b598b4.htm">SQLServerXADataSource</a>. Le applicazioni possono impostare il livello di registrazione su FINE e FINER.</p></td></tr><tr><td><p>KerbAuthentication</p></td><td><p>Registra i messaggi relativi all'autenticazione Kerberos di tipo 4, quando la proprietà di connessione <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> è impostata in modo implicito o esplicito su <span sdata="langKeyword" value="JavaKerberos"><span class="keyword">JavaKerberos</span></span>. L'applicazione può impostare il livello di registrazione su FINE o FINER.</p></td></tr><tr><td><p>TDS.DATA</p></td><td><p>Registra i messaggi contenenti la conversazione a livello di protocollo TDS tra il driver e SQL Server. Il contenuto dettagliato di ogni pacchetto TDS inviato e ricevuto viene registrato in formato ASCII ed esadecimale. Le credenziali di accesso (nomi utente e password) non vengono registrati. Tutti gli altri dati vengono registrati.</p><p>Questa categoria consente di creare messaggi molto dettagliati ed esaustivi e può essere abilitata solo impostando il livello di registrazione su FINEST.</p></td></tr><tr><td><p>TDS.Channel</p></td><td><p>Questa categoria consente di eseguire le tracce delle azioni del canale di comunicazione TCP con SQL Server. I messaggi registrati includono l'apertura e la chiusura di socket, nonché le operazioni di lettura e scrittura. Vengono inoltre eseguite le tracce dei messaggi correlati alla definizione di una connessione SSL (Secure Socket Layer) con SQL Server.</p><p>Può essere abilitata solo impostando il livello di registrazione su FINE, FINER o FINEST.</p></td></tr><tr><td><p>TDS.Writer</p></td><td><p>Questa categoria consente di eseguire le tracce delle operazioni di scrittura nel canale TDS. Si noti che vengono eseguite le tracce solo della lunghezza delle operazioni di scrittura e non del contenuto. Vengono inoltre eseguite le tracce dei problemi quando al server viene inviato un segnale di attenzione per annullare l'esecuzione di un'istruzione.</p><p>Può essere abilitata solo impostando il livello di registrazione su FINEST.</p></td></tr><tr><td><p>TDS.Reader</p></td><td><p>Questa categoria consente di eseguire le tracce di alcune operazioni di lettura dal canale TDS con livello FINEST. Con tale livello le tracce possono risultare particolarmente dettagliate. Con i livelli WARNING e SEVERE questa categoria consente di eseguire le tracce quando il driver riceve un protocollo TDS non valido da SQL Server prima della chiusura della connessione.</p><p>Può essere abilitata solo impostando il livello di registrazione su FINER e FINEST.</p></td></tr><tr><td><p>TDS.Command</p></td><td><p>Questa categoria consente di eseguire la traccia delle transizioni di stato di basso livello e di altre informazioni associate all'esecuzione di comandi TDS, ad esempio le esecuzioni di istruzioni Transact-SQL, i recuperi di cursori ResultSet, i commit e così via.</p><p>Può essere abilitata solo impostando il livello di registrazione su FINEST.</p></td></tr><tr><td><p>TDS.TOKEN</p></td><td><p>Questa categoria consente di registrare solo i token dei pacchetti di flussi TDS e risulta meno dettagliata della categoria TDS.DATA. Può essere abilitata solo impostando il livello di registrazione su FINEST.</p><p>Con il livello FINEST questa categoria consente di eseguire le tracce dei token TDS quando vengono elaborati nella risposta. Con il livello SEVERE esegue le tracce quando viene rilevato un token TDS non valido.</p></td></tr><tr><td><p>SQLServerDatabaseMetaData</p></td><td><p>Consente di registrare i messaggi nella classe <a href="8b8049d0-8c6d-4476-866b-098709f37eec.htm">SQLServerDatabaseMetaData</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerResultSetMetaData</p></td><td><p>Consente di registrare i messaggi nella classe <a href="9a36885f-83f3-44af-85f0-2b849dfd20d4.htm">SQLServerResultSetMetaData</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerParameterMetaData</p></td><td><p>Consente di registrare i messaggi nella classe <a href="546290e0-9411-4a2b-aa36-61251e70e9cf.htm">SQLServerParameterMetaData</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerBlob</p></td><td><p>Consente di registrare i messaggi nella classe <a href="88bd8623-889d-4b5d-99ff-c85b32f3ff5c.htm">SQLServerBlob</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerClob</p></td><td><p>Consente di registrare i messaggi nella classe <a href="24170524-e1ab-4e80-8fd1-6688efacfbde.htm">SQLServerClob</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerSQLXML</p></td><td><p>Consente di registrare i messaggi nella classe <b>SQLServerSQLXML</b> interna. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerDriver</p></td><td><p>Consente di registrare i messaggi nella classe <a href="fbdceae5-7e7b-4edb-8c33-c701ca6b2d53.htm">SQLServerDriver</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr><tr><td><p>SQLServerNClob</p></td><td><p>Consente di registrare i messaggi nella classe <a href="3d3883a2-c39c-439f-bbc0-01e73968672b.htm">SQLServerNClob</a>. Le applicazioni possono impostare il livello di registrazione su FINE.</p></td></tr></table></div></div><h1 class="heading">Abilitazione delle tracce a livello di programmazione</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p>La creazione di tracce può essere abilitata a livello di programmazione creando un oggetto <b>Logger</b> e indicando la categoria da registrare. Il codice seguente, ad esempio, consente di abilitare la registrazione per le istruzioni SQL:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc.Statement");
logger.setLevel(Level.FINER);</pre></span></div><p>Per disabilitare la registrazione dal codice, utilizzare:</p><div class="sampleCode"><span codeLanguage="other"><pre>logger.setLevel(Level.OFF);</pre></span></div><p>Per registrare tutte le categorie disponibili, utilizzare:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc");
logger.setLevel(Level.FINE);</pre></span></div><p>Per disabilitare una categoria specifica, utilizzare:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc.Statement");
logger.setLevel(Level.OFF);</pre></span></div></div><h1 class="heading">Abilitazione delle tracce utilizzando il file Logging.Properties</h1><div id="sectionSection3" class="section" name="collapseableSection" style=""><p>La creazione di tracce può inoltre essere abilitata utilizzando il file <span class="code"> logging.properties </span>, disponibile nella directory <span class="code"> lib </span> dell'installazione Java Runtime Environment (JRE). Il file può essere utilizzato per impostare i valori predefiniti degli oggetti logger e handler utilizzati una volta abilitate le tracce.</p><p>Di seguito è riportato un esempio delle impostazioni che è possibile configurare nei file <span class="code">logging.properties</span>:</p><div class="sampleCode"><span codeLanguage="other"><pre># Specify the handler, the handlers will be installed during VM startup.
handlers= java.util.logging.FileHandler
 
# Default global logging level.
.level= OFF

# default file output is in user's home directory.
java.util.logging.FileHandler.pattern = %h/java%u.log
java.util.logging.FileHandler.limit = 5000000
java.util.logging.FileHandler.count = 20
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter
java.util.logging.FileHandler.level = FINEST

# Facility specific properties.
com.microsoft.sqlserver.jdbc.level=FINEST
</pre></span></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Per impostare le proprietà nel file<span class="code"> logging.properties </span>è possibile utilizzare l'oggetto <b>LogManager</b>, che fa parte di java.util.logging.</p></div></div><span id="seeAlsoSpan"><h1 class="heading">Vedere anche</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="723e2680-a0c5-4a7d-a319-1e49e41078cf.htm">Diagnosi dei problemi relativi al driver JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Inviare <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dThank%20you%20for%20your%20feedback.%20The%20developer%20writing%20teams%20use%20your%20feedback%20to%20improve%20documentation.%20While%20we%20are%20reviewing%20your%20feedback,%20we%20may%20send%20you%20e-mail%20to%20ask%20for%20clarification%20or%20feedback%20on%20a%20solution.%20We%20do%20not%20use%20your%20e-mail%20address%20for%20any%20other%20purpose%20and%20we%20delete%20it%20after%20we%20finish%20our%20review.%0\AFor%20further%20information%20about%20the%20privacy%20policies%20of%20Microsoft,%20please%20see%20http://privacy.microsoft.com/it-it/default.aspx.%0\A%0\d','Customer%20Feedback');">commenti e suggerimenti</a> su questo argomento a Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tutti i diritti sono riservati.</a></p></span></div></div></body></html>